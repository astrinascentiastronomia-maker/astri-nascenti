<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Il cielo condiviso — Archivio Foto Astri Nascenti</title>

<style>
@font-face {
  font-family: 'LemonMilkLight';
  src: url('fonts/LemonMilk-Light.woff2') format('woff2'),
       url('fonts/LemonMilk-Light.woff') format('woff');
  font-display: swap;
}

body {
  margin:0;
  font-family:Arial,sans-serif;
  background:#000;
  color:#fff;
}

h1 {
  font-family:'LemonMilkLight', sans-serif !important;
  letter-spacing:.28em;
  text-transform:uppercase;
  text-align:center;
  margin:3rem 1rem 1rem;
}

p {
  text-align:center;
  color:#c9d6df;
  margin-bottom:3rem;
}

.gallery {
  max-width:1200px;
  margin:0 auto 1.5rem;
  padding:0 1rem;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:1.5rem;
}

.gallery a img {
  width:100%;
  border-radius:18px;
  box-shadow:0 20px 50px rgba(0,0,0,.6);
  display:block;
  transition: transform 0.3s ease;
}

.gallery a img:hover {
  transform: scale(1.03);
}

.gallery-footer {
  max-width: 900px;
  margin: 0 auto 3rem;
  padding: 0 1.5rem;
  text-align: center;
  font-size: 0.85rem;
  color: #888;
  line-height: 1.5;
  font-style: italic;
}

/* LIGHTBOX */
.lightbox {
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.95);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.lightbox img {
  max-width:95%;
  max-height:95%;
  border-radius:8px;
  box-shadow:0 30px 80px rgba(0,0,0,.8);
}

.lightbox:target {
  display:flex;
}

.lightbox a {
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:100%;
}

.back {
  text-align:center;
  margin:2.5rem 0 4rem;
}

.back a {
  color:#c9d6df;
  text-decoration:none;
}
</style>
</head>

<body>

<h1>Il cielo condiviso</h1>
<p>Galleria: immagini dalle serate di osservazione</p>

<div class="gallery" id="main-gallery"></div>

<div class="gallery-footer">
  serate osservative, attività di divulgazione e incontri svolti negli anni recenti presso plessi scolastici, parchi, associazioni, circoli e spazi di aggregazione
</div>

<div id="lightbox-wrapper"></div>

<div class="back">
  <!-- Link forzato alla home del progetto GitHub Pages -->
  <a id="homeLink"
     href="https://astrinascentiastronomia-maker.github.io/astri-nascenti/index.html"
     onclick="window.location.href='https://astrinascentiastronomia-maker.github.io/astri-nascenti/index.html'; return false;"
     rel="noopener noreferrer"
     >← Torna alla home</a>
</div>

<script>
  // --- IMPOSTAZIONI ---
  const ultimaFoto = 36; // Cambia questo numero quando aggiungi nuove foto
  const cartella = 'images/';
  const prefisso = 'astrinascentifoto';
  const estensione = '.jpg';
  // --------------------

  const gallery = document.getElementById('main-gallery');
  const wrapper = document.getElementById('lightbox-wrapper');

  for (let i = 1; i <= ultimaFoto; i++) {
    const imgSrc = `${cartella}${prefisso}${i}${estensione}`;
    const id = `o${i}`;

    const link = document.createElement('a');
    link.href = `#${id}`;
    
    const img = document.createElement('img');
    img.src = imgSrc;
    img.alt = `Osservazioni - foto ${i}`;
    img.loading = "lazy";
    
    img.onerror = function() {
      this.parentElement.remove();
      const lbToRemove = document.getElementById(id);
      if(lbToRemove) lbToRemove.remove();
    };

    link.appendChild(img);
    gallery.appendChild(link);

    const lbDiv = document.createElement('div');
    lbDiv.id = id;
    lbDiv.className = 'lightbox';
    lbDiv.innerHTML = `<a href="#_"><img src="${imgSrc}" alt="Osservazioni - foto ${i}"></a>`;
    wrapper.appendChild(lbDiv);
  }

  // (Opzionale) assicurati che il link "homeLink" forzi la navigazione anche se la click area è influenzata da ancore
  document.getElementById('homeLink').addEventListener('click', function(e){
    e.preventDefault();
    // uso replace se vuoi evitare che la pagina corrente rimanga nella cronologia:
    // window.location.replace('https://astrinascentiastronomia-maker.github.io/astri-nascenti/index.html');
    // altrimenti usa assign per comportamento normale:
    window.location.href = 'https://astrinascentiastronomia-maker.github.io/astri-nascenti/index.html';
  });
</script>

</body>
</html>
